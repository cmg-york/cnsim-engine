<!DOCTYPE html>


<!--
 | Generated by Apache Maven Doxia Site Renderer 2.0.0 from src/site/markdown/contributors/design-by-contract-jml.md at 2026-01-21
 | Rendered using Apache Maven Fluido Skin 2.1.0
-->
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="generator" content="Apache Maven Doxia Site Renderer 2.0.0" />
    <title>Design By Contract - JML – CNSim Engine</title>
    <link rel="stylesheet" href="../css/apache-maven-fluido-2.1.0.min.css" />
    <link rel="stylesheet" href="../css/site.css" />
    <link rel="stylesheet" href="../css/print.css" media="print" />
    <script src="../js/apache-maven-fluido-2.1.0.min.js"></script>
<script>
          window.MathJax = {
            tex: {
              inlineMath: [['$', '$'], ['\\(', '\\)']],
              displayMath: [['$$', '$$'], ['\\[', '\\]']],
              macros: {
                  R: '{\\mathbb{R}}',
                  N: '{\\mathbb{N}}',
                  Z: '{\\mathbb{Z}}',
                  Q: '{\\mathbb{Q}}',
                  C: '{\\mathbb{C}}',
                  ge: '{\\geq}',
                  le: '{\\leq}'
                }
            },
            svg: { fontCache: 'global' }
          };
          </script>
          <script defer src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js"></script>
<meta name="main_authors" content="[&quot;Nina Dang &lt;nina2022@my.yorku.ca&gt;&quot;]" /><meta name="contributors" content="[&quot;&quot;]" /><meta name="reviewers" content="[&quot;&quot;]" />  </head>
  <body>
    <div class="container-fluid container-fluid-top">
      <header>
        <div id="banner">
          <div class="pull-left"></div>
          <div class="pull-right"></div>
          <div class="clear"><hr/></div>
        </div>

        <div id="breadcrumbs">
          <ul class="breadcrumb">
        <li id="publishDate">Last Published: 2026-01-21<span class="divider">|</span>
</li>
          <li id="projectVersion">Version: 0.0.2-SNAPSHOT</li>
          </ul>
        </div>
      </header>
      <div class="row-fluid">
        <header id="leftColumn" class="span2">
          <nav class="well sidebar-nav">
  <ul class="nav nav-list">
   <li class="nav-header">Documentation</li>
    <li><a href="../documentation/overview.html">Conceptual Overview</a></li>
    <li><a href="../documentation/main.html">Architecture: Main Loop</a></li>
    <li><a href="../documentation/events.html">Architecture: Events</a></li>
    <li><a href="../documentation/samplers.html">Architecture: Samplers</a></li>
    <li><a href="../documentation/nodes.html">Architecture: Nodes and Behaviors</a></li>
    <li><a href="../documentation/reporting.html">Architecture: Reporting</a></li>
    <li><a href="../documentation/units.html">Units of Measurement</a></li>
   <li class="nav-header">API Reference</li>
    <li><a href="../apidocs/index.html">API Reference</a></li>
   <li class="nav-header">Contributor&apos;s Guide</li>
    <li><a href="../contributors/formatting.html">Programming Style</a></li>
    <li><a href="../contributors/contracts.html">Contract Style</a></li>
    <li><a href="../contributors/git-workflow.html">Git Main Workflow</a></li>
    <li><a href="../contributors/commits.html">Commit Conventions</a></li>
    <li><a href="../contributors/git-habits.html">Git and Commit Habits</a></li>
    <li><a href="../contributors/documentation.html">Documentation Workflow</a></li>
    <li><a href="../contributors/release.html">Release Workflow</a></li>
    <li><a href="../contributors/deploy.html">Deployment Workflow</a></li>
    <li><a href="../contributors/adr.html">Architectural Decisions</a></li>
    <li><a href="../contributors/testing.html">Testing Conventions</a></li>
    <li class="active"><a>Design By Contract - JML</a></li>
   <li class="nav-header">Maven Info</li>
    <li><a href="../project-info.html">Overview</a></li>
    <li><a href="../dependencies.html">Dependencies</a></li>
    <li><a href="../dependency-info.html">Dependency Information</a></li>
    <li><a href="../dependency-management.html">Dependency Management</a></li>
    <li><a href="../plugin-management.html">Plugin Management</a></li>
    <li><a href="../plugins.html">Plugins</a></li>
    <li><a href="../summary.html">Summary</a></li>
    <li><a href="../team.html">Team</a></li>
   <li class="nav-header">Test Coverage Report</li>
    <li><a href="../jacoco/index.html">JaCoCo Report</a></li>
  </ul>
          </nav>
          <div class="well sidebar-nav">
            <div id="poweredBy">
              <div class="clear"></div>
              <div class="clear"></div>
<a href="https://maven.apache.org/" class="builtBy" target="_blank"><img class="builtBy" alt="Built by Maven" src="../images/logos/maven-feather.png" /></a>
            </div>
          </div>
        </header>
        <main id="bodyColumn" class="span10">
<section><a id="Design_By_Contract_-_JML"></a>
<h1>Design By Contract - JML</h1><!-- TOC -->

<ul>

<li><a href="#design-by-contract---jml">Design By Contract - JML</a>
<ul>

<li><a href="#specification-inheritance">Specification Inheritance</a>
<ul>

<li><a href="#why-preconditions-can-be-weaker">Why preconditions can be weaker</a></li>
<li><a href="#why-postconditions-can-be-stronger">Why postconditions can be stronger</a></li>
</ul></li>
<li><a href="#jml">JML</a>
<ul>

<li><a href="#class-level-contract">Class-level contract</a></li>
<li><a href="#method-level-contract">Method-level contract</a></li>
<li><a href="#jml-conventions-and-best-practices">JML Conventions and Best Practices</a></li>
</ul></li>
<li><a href="#references">References</a></li>
</ul></li>
</ul><!-- TOC -->

<p>Design by Contract (DbC) defines obligations that both the client (caller/user)
and the supplier (callee/implementor) must follow to ensure correctness.</p>
<p>If the preconditions and invariants are satisfied before a call, then it is
expected that the postconditions and invariants will hold after the call.</p>
<ul>

<li>If preconditions are not satisfied (invalid arguments), the client violates the contract.</li>
<li>If postconditions are not satisfied (incorrect implementation), the supplier violates the contract.</li>
</ul>
<table class="table table-striped">
<thead>
<tr class="a">
<th> </th>
<th>Obligation</th>
<th>Benefit</th></tr></thead><tbody>
<tr class="b">
<td>Client</td>
<td>Satisfy preconditions</td>
<td>Receive service</td></tr>
<tr class="a">
<td>Supplier</td>
<td>Implement the service (satisfy postconditions)</td>
<td>Assume preconditions</td></tr></tbody>
</table>
<section><a id="Specification_Inheritance"></a>
<h2>Specification Inheritance</h2>
<ul>

<li>Subclass may weaken preconditions (accept more cases)</li>
<li>Subclass may strengthen postconditions/invariant (promise more)</li>
</ul>
<p>For example:</p>

<pre><code class="nohighlight nocode"># ClassB is subclass of ClassA
ClassA x = new ClassB();
x.someMethod();
</code></pre>
<ul>

<li>Client only knows ClassA&#x2019;s contract.</li>
<li>ClassB must follow what the client was promised by ClassA.</li>
<li>This is based on Liskov Substitution Principle (LSP) from SOLID: Without changing the program's behavior,
objects of the parent type can be substituted with objects of the subclass type.</li>
<li>For invariants, ClassB must satisfy all invariants of ClassA, plus any additional invariants it introduces.</li>
</ul><section><a id="Why_preconditions_can_be_weaker"></a>
<h3>Why preconditions can be weaker</h3>

<pre><code class="nohighlight nocode"># If preconditions can be stronger
ClassA.someMethod requires: input &gt; 0
ClassB.someMethod requires: input &gt; 10 
</code></pre>
<p>Client calls <code>ClassB.someMethod(5)</code>, satisfying ClassA&#x2019;s contract but not ClassB's contract. This breaks LSP.</p></section><section><a id="Why_postconditions_can_be_stronger"></a>
<h3>Why postconditions can be stronger</h3>

<pre><code class="nohighlight nocode"># If postconditions can be weaker
ClassA.someMethod ensures: result &gt;= 0
ClassB.someMethod ensures: result &gt; -10
</code></pre>
<p>Client calls <code>ClassB.someMethod</code>, expecting <code>result &gt;= 0</code> but it returns -5. Again, this breaks LSP.</p><hr /></section></section><section><a id="JML"></a>
<h2>JML</h2>
<p>JML (Java Modeling Language) is a specification language to define the behavior and interfaces of Java programs.
JML is influenced by Eiffel&#x2019;s Design by Contract, but is more expressive and supports richer specification constructs.</p>
<p>JML supports:</p>
<ul>

<li>precondition: <code>requires</code></li>
<li>postcondition: <code>ensures</code></li>
<li>invariants: <code>invariant</code></li>
<li>quantifiers: <code>\forall</code>, <code>\exists</code></li>
<li>frame condition: <code>pure</code> (method is read-only), <code>assignable</code></li>
<li>visibility: <code>public</code>, <code>private</code></li>
</ul>
<p>Other important keywords include:</p>
<ul>

<li>exceptional postcondition: <code>signals</code></li>
<li>method&#x2019;s return value: <code>\result</code></li>
<li>value of <code>expr</code> in the pre-state (the moment the method is entered): <code>\old(expr)</code></li>
</ul>
<p>JML is written as annotations inside comments, which Java ignores but JML tools understand:</p>

<pre class="prettyprint"><code class="language-text"># single-line
//@ JML goes here

# multi-line
/*@ JML goes here @*/
</code></pre>
<p>If you want to display JML specifications in Javadoc output, you can include them as preformatted text using <code>&lt;pre&gt;{@code...}&lt;/pre&gt;</code>:</p>

<pre class="prettyprint"><code class="language-text">/**
 * &lt;pre&gt;{@code
 * //@ requires x &gt;= 0;
 * //@ ensures  \result &gt;= 0;
 * }&lt;/pre&gt;
 */
</code></pre><section><a id="Class-level_contract"></a>
<h3>Class-level contract</h3>
<p>Class invariants describe conditions that should hold for every instance of a class
whenever that object is visible to a client (at entry/exit of public method call)
Class invariants are placed typically right after the class declaration. Since these are comments,
they won&#x2019;t appear in the Javadoc output by default.</p>

<pre class="prettyprint"><code class="language-text">public class BankAccount {
    /*@ invariant balance &gt;= 0; @*/
    private int balance = 0;
}
</code></pre></section><section><a id="Method-level_contract"></a>
<h3>Method-level contract</h3>
<p>For each public method (also often for protected methods in APIs meant to be extended),
specify its contract using JML <code>requires</code>, <code>ensures</code>, and related clauses.
JML specifications are placed before the method&#x2019;s header (signature) in the source code.</p>
<p>Method-level contract defines:</p>
<ul>

<li>What must be true before calling the method (precondition).</li>
<li>What the method guarantees after execution if it returns normally (postcondition).</li>
<li>What the method guarantees if it terminates with an exception (exceptional postcondition).</li>
<li>Which fields/state may be modified by the method (frame condition).</li>
</ul>

<pre class="prettyprint"><code class="language-text">/*@ 
  @ requires amount &gt;= 0;
  @ ensures balance == \old(balance) + amount;
  @ assignable balance;
  @ signals (IllegalArgumentException) amount &lt; 0 ==&gt; \old(balance) == balance;
  @*/
public void deposit(int amount) { ... }
</code></pre></section><section><a id="JML_Conventions_and_Best_Practices"></a>
<h3>JML Conventions and Best Practices</h3>
<ul>

<li>1 JML clause per line for readability</li>
<li>JML specification clauses (like <code>requires</code>, <code>ensures</code>, <code>assignable</code>, <code>invariant</code>, <code>initially</code>, <code>constraint</code>, etc.) precede fields, constructors, methods declaration.
Note that JML has statement annotations (like <code>assert</code>, <code>assume</code>, <code>decreases</code>, <code>loop_invariant</code>) that appear inside method bodies.</li>
<li>Be consistent with keywords. There are some JML synonyms (like <code>requires</code> or <code>pre</code>, <code>ensures</code> or <code>post</code>, <code>assignable</code> or <code>modifies</code>, <code>signals</code> or <code>exsures</code>), so stick with one set.</li>
<li>Anything essential or what is intended about the behavior should be included in the contract/specification as clients may rely on it.
At the same time, the specification can be underspecified/incomplete to give implementors freedom and
room for improvement or change on non-essential details (implementation decisions).</li>
</ul></section></section><section><a id="References"></a>
<h2>References</h2>
<p>JML Tutorial: <a href="https://www.openjml.org/tutorial/" class="externalLink">https://www.openjml.org/tutorial/</a></p>
<p>JML Home Page: <a href="https://www.cs.ucf.edu/~leavens/JML/index.shtml" class="externalLink">https://www.cs.ucf.edu/~leavens/JML/index.shtml</a></p>
<p>Preliminary Design of JML: <a href="https://www.tofgarion.net/lectures/IN201/ressources/prelimdesign.pdf" class="externalLink">https://www.tofgarion.net/lectures/IN201/ressources/prelimdesign.pdf</a></p>
<p>Design by Contract with JML: <a href="https://www.cs.toronto.edu/~chechik/courses05/csc410/readings/jmldbc.pdf" class="externalLink">https://www.cs.toronto.edu/~chechik/courses05/csc410/readings/jmldbc.pdf</a></p>
<p>JML/DbC Slides:
<a href="https://www.eecs.yorku.ca/~wangcw/teaching/lectures/2018/F/EECS3311/slides/EECS3311_F18_All_Slides.pdf" class="externalLink">https://www.eecs.yorku.ca/~wangcw/teaching/lectures/2018/F/EECS3311/slides/EECS3311_F18_All_Slides.pdf</a></p>
<p><a href="https://sites.cs.ucsb.edu/~bultan/courses/272/lectures/Contract-JML.pdf" class="externalLink">https://sites.cs.ucsb.edu/~bultan/courses/272/lectures/Contract-JML.pdf</a></p>
<p><a href="https://www.ifi.uzh.ch/dam/jcr:ffffffff-fd5f-cdf8-ffff-fffffd2df706/07-jmldbc.pdf" class="externalLink">https://www.ifi.uzh.ch/dam/jcr:ffffffff-fd5f-cdf8-ffff-fffffd2df706/07-jmldbc.pdf</a></p></section></section>        </main>
      </div>
    </div>
    <hr/>
    <footer>
      <div class="container-fluid">
        <div class="row-fluid">
            <p>©      2026
<a href="https://cmg.info.yorku.ca/">Conceptual Modeling Group @ York University</a>
</p>
        </div>
      </div>
    </footer>
  </body>
</html>
