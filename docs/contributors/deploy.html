<!DOCTYPE html>


<!--
 | Generated by Apache Maven Doxia Site Renderer 2.0.0 from src/site/markdown/contributors/deploy.md at 2025-10-09
 | Rendered using Apache Maven Fluido Skin 2.1.0
-->
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="generator" content="Apache Maven Doxia Site Renderer 2.0.0" />
    <title>Deployment Workflow â€“ CNSim Engine</title>
    <link rel="stylesheet" href="../css/apache-maven-fluido-2.1.0.min.css" />
    <link rel="stylesheet" href="../css/site.css" />
    <link rel="stylesheet" href="../css/print.css" media="print" />
    <script src="../js/apache-maven-fluido-2.1.0.min.js"></script>
  </head>
  <body>
    <div class="container-fluid container-fluid-top">
      <header>
        <div id="banner">
          <div class="pull-left"></div>
          <div class="pull-right"></div>
          <div class="clear"><hr/></div>
        </div>

        <div id="breadcrumbs">
          <ul class="breadcrumb">
        <li id="publishDate">Last Published: 2025-10-09<span class="divider">|</span>
</li>
          <li id="projectVersion">Version: 0.0.2-SNAPSHOT</li>
          </ul>
        </div>
      </header>
      <div class="row-fluid">
        <header id="leftColumn" class="span2">
          <nav class="well sidebar-nav">
  <ul class="nav nav-list">
   <li class="nav-header">Documentation</li>
    <li><a href="../documentation/overview.html">Conceptual Overview</a></li>
    <li><a href="../documentation/main.html">Architecture: Main Loop</a></li>
    <li><a href="../documentation/events.html">Architecture: Events</a></li>
    <li><a href="../documentation/samplers.html">Architecture: Samplers</a></li>
    <li><a href="../documentation/nodes.html">Architecture: Nodes and Behaviors</a></li>
    <li><a href="../documentation/reporting.html">Architecture: Reporting</a></li>
    <li><a href="../documentation/units.html">Units of Measurement</a></li>
   <li class="nav-header">API Reference</li>
    <li><a href="../apidocs/index.html">API Reference</a></li>
   <li class="nav-header">Contibutor&apos;s Guide</li>
    <li><a href="../contributors/formatting.html">Required Style</a></li>
    <li><a href="../contributors/git-workflow.html">Git Main Worklow</a></li>
    <li><a href="../contributors/commits.html">Commit Conventions</a></li>
    <li><a href="../contributors/documentation.html">Documentation Workflow</a></li>
    <li><a href="../contributors/release.html">Release Workflow</a></li>
    <li class="active"><a>Deployment Workflow</a></li>
    <li><a href="../contributors/adr.html">Architectural Decisions</a></li>
   <li class="nav-header">Maven Info</li>
    <li><a href="../project-info.html">Overview</a></li>
    <li><a href="../dependencies.html">Dependencies</a></li>
    <li><a href="../dependency-info.html">Dependency Information</a></li>
    <li><a href="../dependency-management.html">Dependency Management</a></li>
    <li><a href="../plugin-management.html">Plugin Management</a></li>
    <li><a href="../plugins.html">Plugins</a></li>
    <li><a href="../summary.html">Summary</a></li>
    <li><a href="../team.html">Team</a></li>
  </ul>
          </nav>
          <div class="well sidebar-nav">
            <div id="poweredBy">
              <div class="clear"></div>
              <div class="clear"></div>
<a href="https://maven.apache.org/" class="builtBy" target="_blank"><img class="builtBy" alt="Built by Maven" src="../images/logos/maven-feather.png" /></a>
            </div>
          </div>
        </header>
        <main id="bodyColumn" class="span10">
<section><a id="Deployment_Workflow"></a>
<h1>Deployment Workflow</h1><section><section><a id="a.28under_construction.29"></a>
<h3><em>(under construction)</em></h3>
<p>[concrete steps to deploy assuming setup]</p></section></section></section><section><a id="Deployment_Setup_Guide"></a>
<h1>Deployment Setup Guide</h1><!-- TOC -->

<ul>

<li><a href="#deployment-guide">Deployment Guide</a>
<ul>

<li><a href="#publish-to-maven-central-via-central-portal">Publish to Maven Central via Central Portal</a>
<ul>

<li><a href="#a1-create-sonatype-maven-central-account">1. Create Sonatype Maven Central Account</a></li>
<li><a href="#a2-add-and-verify-the-namespacegroupid">2. Add and verify the namespace/groupId</a></li>
<li><a href="#a3-metadata-requirements">3. Metadata requirements</a></li>
<li><a href="#a4-sources-and-javadoc">4. Sources and JavaDoc</a></li>
<li><a href="#a5-generate-and-distribute-a-gpg-key-for-signing">5. Generate and Distribute a GPG Key for Signing</a></li>
<li><a href="#a6-add-gpg-plugin">6. Add GPG plugin</a></li>
<li><a href="#a7-generate-a-user-token">7. Generate a user token</a></li>
<li><a href="#a8-add-publication-maven-plugin-to-pomxml">8. Add Publication Maven plugin to <code>pom.xml</code></a></li>
<li><a href="#a9-setup-settingsxml">9. Setup <code>settings.xml</code></a></li>
<li><a href="#a10-locally-deploy">10. Locally Deploy</a></li>
<li><a href="#a11-optional-github-actions--cicd">11. [Optional] GitHub Actions &amp; CI/CD</a></li>
</ul></li>
<li><a href="#extra-notes">Extra notes</a>
<ul>

<li><a href="#snapshots">SNAPSHOTs</a></li>
<li><a href="#manually-getting-artifacts-or-built-jar">Manually getting artifacts or built JAR</a></li>
</ul></li>
<li><a href="#references">References</a></li>
</ul></li>
</ul><!-- TOC -->
<section><a id="Publish_to_Maven_Central_via_Central_Portal"></a>
<h2>Publish to Maven Central via Central Portal</h2>
<p>This is after the OSSRH sunset (June 30, 2025).</p>
<p>Requirements:</p>
<ul>

<li>git</li>
<li>Maven &amp; JDK</li>
<li>GPG</li>
</ul><section><a id="a1._Create_Sonatype_Maven_Central_Account"></a>
<h3>1. Create Sonatype Maven Central Account</h3>
<p>Sign up at <a href="https://central.sonatype.com" class="externalLink">https://central.sonatype.com</a></p>
<p><img src="../images/signIn.png" alt="Sign In" /></p>
<p><img src="../images/signUp.png" alt="Sign Up" /></p>
<blockquote>

<p>Tip: If you are fine with <code>io.github.&lt;myusername&gt;</code> as a namespace/groupId, sign up with GitHub to automatically register it.
You can skip step 2 and move onto step 3: metadata requirements.</p>
<p><img src="../images/signUpWithGithub.png" alt="" /></p>
<p>If you want <code>io.github.&lt;github organization name&gt;</code>, it is not available as an automatically registered namespace and
would need to make a public repository with verification key as the name: <code>github.com/&lt;org&gt;/&lt;verification-key&gt;</code>.
More on step 2</p>
</blockquote></section><section><a id="a2._Add_and_verify_the_namespace.2FgroupId"></a>
<h3>2. Add and verify the namespace/groupId</h3>
<p>To add a namespace, click on username/email address in the top right corner
of <a href="https://central.sonatype.com" class="externalLink">https://central.sonatype.com</a>, then click on &#x201c;View Namespaces&#x201d; in the dropdown.</p>
<p>Click on &#x201c;Add Namespace&#x201d; button.</p>
<p>Enter a namespace (it is a reversed domain name), click &#x201c;Submit&#x201d; then click &#x201c;Verify Namespace&#x201d; button.</p>
<p>Namespace can either be:</p>
<ol style="list-style-type: decimal;">

<li><del>A web domain you own. Verification involves adding a DNS TXT record to DNS registrars or hosting providers with
a value set to the provided Verification Key.
For instance, your groupId is <code>ca.yorku.cmg</code> so domain name is <code>ca.yorku</code>,
where the automated system will check for the TXT record.</del></li>
</ol>
<blockquote>

<p><del>Do not confirm unless you've added a DNS TXT record. Do not proceed with verification unless you have added and verified your DNS TXT record. Doing so will result in namespace verification delays</del></p>
</blockquote>
<ol style="list-style-type: decimal;">

<li>A domain linked to a Code Hosting Service such as GitHub. For example. GitHub-based namespace is <code>io.github.&lt;myusername&gt;</code>.
Verification only requires signing up with GitHub (for GitHub user accounts) or creating a temporary public repository like this: <code>github.com/&lt;myusername&gt;/verification-key</code> or <code>github.com/&lt;org&gt;/&lt;verification-key&gt;</code>(repository with a name as Verification Key).
This verification process is easier compared to DNS TXT record.</li>
</ol>
<p>If done correctly, verification status should be changed to &#x201c;Verified.&#x201d;</p>
<p><img src="../images/verifiedNamespace.png" alt="Verified Namespace" /></p></section><section><a id="a3._Metadata_requirements"></a>
<h3>3. Metadata requirements</h3>
<blockquote>

<p><code>version</code> cannot end in <code>-SNAPSHOT</code> for Maven Central&#x2019;s release repository.
Only the dedicated snapshot repository does.</p>
</blockquote>
<p>On top of <code>groupId</code>, <code>artifactId</code>, <code>version</code> (should follow semantic versioning), <code>pom.xml</code> needs to have:</p>
<ul>

<li><code>name</code></li>
<li><code>description</code></li>
<li><code>url</code> of project</li>
</ul>

<pre class="prettyprint"><code class="language-xml">&lt;name&gt;cnsim-engine&lt;/name&gt;
&lt;description&gt;cnsim-engine description&lt;/description&gt;
&lt;url&gt;http://www.example.com&lt;/url&gt;
</code></pre>
<ul>

<li><code>licenses</code> used for distributing your components</li>
</ul>

<pre class="prettyprint"><code class="language-xml">&lt;licenses&gt;
  &lt;license&gt;
    &lt;name&gt;GNU Lesser General Public License, Version 2.1&lt;/name&gt;
    &lt;url&gt;https://www.gnu.org/licenses/old-licenses/lgpl-2.1.html&lt;/url&gt;
  &lt;/license&gt;
&lt;/licenses&gt;
</code></pre>
<ul>

<li><code>developers</code></li>
</ul>
<p>If the person should not be contacted about the project, they need not be listed here.</p>
<p>Here's an example:</p>

<pre class="prettyprint"><code class="language-xml">&lt;developers&gt;
  &lt;developer&gt;
    &lt;id&gt;john&lt;/id&gt;              &lt;!-- optional --&gt;
    &lt;name&gt;John Doe&lt;/name&gt;  &lt;!-- recommended --&gt;
    &lt;email&gt;john@example.com&lt;/email&gt;  &lt;!-- optional (many skip to avoid spam) --&gt;
    &lt;organization&gt;York University&lt;/organization&gt;       &lt;!-- optional --&gt;
    &lt;organizationUrl&gt;https://lassonde.yorku.ca&lt;/organizationUrl&gt; &lt;!-- optional --&gt;
  &lt;/developer&gt;
  &lt;developer&gt;
    &lt;id&gt;bob&lt;/id&gt;                &lt;!-- optional --&gt;
    &lt;name&gt;Bob Smith&lt;/name&gt;        &lt;!-- recommended --&gt;
    &lt;url&gt;https://github.com/bobsmith&lt;/url&gt; &lt;!-- optional --&gt;
  &lt;/developer&gt;
&lt;/developers&gt;
</code></pre>
<ul>

<li><code>scm</code></li>
</ul>
<p>Source Code Management (SCM) is connection to your source control system. URL does not need to be public.</p>

<pre class="prettyprint"><code class="language-xml">&lt;scm&gt;
  &lt;connection&gt;scm:git:https://github.com/cmg-york/cnsim-engine.git&lt;/connection&gt;
  &lt;developerConnection&gt;scm:git:ssh://git@github.com/cmg-york/cnsim-engine.git&lt;/developerConnection&gt;
  &lt;url&gt;https://github.com/cmg-york/cnsim-engine&lt;/url&gt;
&lt;/scm&gt;
</code></pre></section><section><a id="a4._Sources_and_JavaDoc"></a>
<h3>4. Sources and JavaDoc</h3>
<blockquote>

<p>For every <code>&lt;artifactId&gt;-&lt;version&gt;.jar</code>, you must provide a corresponding <code>&lt;artifactId&gt;-&lt;version&gt;-sources.jar</code>
and a <code>&lt;artifactId&gt;-&lt;version&gt;-javadoc.jar</code></p>
</blockquote>
<p>Add these two plugins:</p>

<pre class="prettyprint"><code class="language-xml">&lt;build&gt;
  &lt;plugins&gt;
    &lt;!-- Sources JAR --&gt;
    &lt;plugin&gt;
      &lt;artifactId&gt;maven-source-plugin&lt;/artifactId&gt;
      &lt;version&gt;3.3.1&lt;/version&gt;
      &lt;executions&gt;
        &lt;execution&gt;
          &lt;id&gt;attach-sources&lt;/id&gt;
          &lt;phase&gt;package&lt;/phase&gt;
          &lt;goals&gt;&lt;goal&gt;jar-no-fork&lt;/goal&gt;&lt;/goals&gt;
        &lt;/execution&gt;
      &lt;/executions&gt;
    &lt;/plugin&gt;

    &lt;!-- Javadoc JAR --&gt;
    &lt;plugin&gt;
      &lt;artifactId&gt;maven-javadoc-plugin&lt;/artifactId&gt;
      &lt;version&gt;3.11.1&lt;/version&gt;
      &lt;configuration&gt;
        &lt;!-- So javadoc doesn&#x2019;t fail your release due to missing comments --&gt;
        &lt;doclint&gt;all,-missing&lt;/doclint&gt;
      &lt;/configuration&gt;
      &lt;executions&gt;
        &lt;execution&gt;
          &lt;id&gt;attach-javadocs&lt;/id&gt;
          &lt;phase&gt;package&lt;/phase&gt;
          &lt;goals&gt;&lt;goal&gt;jar&lt;/goal&gt;&lt;/goals&gt;
        &lt;/execution&gt;
      &lt;/executions&gt;
    &lt;/plugin&gt;
  &lt;/plugins&gt;
&lt;/build&gt;
</code></pre></section><section><a id="a5._Generate_and_Distribute_a_GPG_Key_for_Signing"></a>
<h3>5. Generate and Distribute a GPG Key for Signing</h3>
<p>Create a key pair:</p>

<pre class="prettyprint"><code class="language-bash">gpg --full-generate-key
</code></pre>
<p>Follow the prompts and make sure to enter a real email.
Pick a secure passphrase and remember it.</p>
<p>List the key:</p>

<pre class="prettyprint"><code class="language-bash">gpg --list-secret-keys --keyid-format=long
</code></pre>
<p>Make public key discoverable:</p>

<pre class="prettyprint"><code class="language-bash"># Upload to Ubuntu keyserver (no email verification)
gpg --keyserver keyserver.ubuntu.com --send-keys &lt;KEY_ID&gt;

# Upload to OpenPGP keyserver (email verification required per UID)
gpg --keyserver keys.openpgp.org --send-keys  &lt;KEY_ID&gt;
</code></pre>
<p>To verify upload:</p>

<pre class="prettyprint"><code class="language-bash"># For Ubuntu keyserver
gpg --keyserver keyserver.ubuntu.com --recv-keys &lt;KEY_ID&gt;

# For OpenPGP keyserver
gpg --keyserver keys.openpgp.org --recv-keys &lt;KEY_ID&gt;
</code></pre>
<p>Export and store the keys:</p>

<pre class="prettyprint"><code class="language-bash"># Export private key
gpg --export-secret-keys --armor &lt;KEY_ID&gt; &gt; private.key

# Export public key
gpg --export --armor &lt;KEY_ID&gt; &gt; public.key
</code></pre></section><section><a id="a6._Add_GPG_plugin"></a>
<h3>6. Add GPG plugin</h3>
<p>All artifacts are required to be signed.</p>
<p><code>maven-gpg-plugin</code> will sign the POM, JAR, and attached artifacts with your GPG key.</p>

<pre class="prettyprint"><code class="language-xml"> &lt;plugin&gt;
    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
    &lt;artifactId&gt;maven-gpg-plugin&lt;/artifactId&gt;
    &lt;version&gt;3.2.7&lt;/version&gt;
    &lt;executions&gt;
        &lt;execution&gt;
            &lt;id&gt;sign-artifacts&lt;/id&gt;
            &lt;phase&gt;verify&lt;/phase&gt;
            &lt;goals&gt;&lt;goal&gt;sign&lt;/goal&gt;&lt;/goals&gt;
        &lt;/execution&gt;
    &lt;/executions&gt;
    &lt;configuration&gt;
        &lt;!-- optional: explicitly choose key --&gt;
        &lt;!-- &lt;keyname&gt;${gpg.keyname}&lt;/keyname&gt; --&gt;
    &lt;/configuration&gt;
&lt;/plugin&gt;

</code></pre></section><section><a id="a7._Generate_a_user_token"></a>
<h3>7. Generate a user token</h3>
<p>Hover over the top right account profile and navigate to &#x201c;View Account&#x201d;:</p>
<p><img src="../images/viewAccount.png" alt="View Account" /></p>
<p>Click the &#x201c;Generate User Token&#x201d; button:</p>
<p><img src="../images/generateUserToken.png" alt="Generate User Token" /></p>
<p>Click &#x201c;Ok&#x201d;:</p>
<p><img src="../images/confirmUserToken.png" alt="" /></p>
<blockquote>

<p>Note: This action will invalidate any existing token</p>
</blockquote>
<p>Save the credentials:</p>
<p><img src="../images/viewUserToken.png" alt="" /></p></section><section><a id="a8._Add_Publication_Maven_plugin_to_pom.xml"></a>
<h3>8. Add Publication Maven plugin to <code>pom.xml</code></h3>

<pre class="prettyprint"><code class="language-xml">&lt;plugin&gt;
 &lt;groupId&gt;org.sonatype.central&lt;/groupId&gt;
 &lt;artifactId&gt;central-publishing-maven-plugin&lt;/artifactId&gt;
 &lt;version&gt;0.8.0&lt;/version&gt;
 &lt;extensions&gt;true&lt;/extensions&gt;
 &lt;configuration&gt;
   &lt;publishingServerId&gt;central&lt;/publishingServerId&gt;
   &lt;autoPublish&gt;true&lt;/autoPublish&gt;
   &lt;waitUntil&gt;uploaded&lt;/waitUntil&gt;
 &lt;/configuration&gt;
&lt;/plugin&gt;
</code></pre><hr />
<p>Overall <code>pom.xml</code> looks like this:</p>

<pre class="prettyprint"><code class="language-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;
         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd&quot;&gt;
    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;

    &lt;groupId&gt;ca.yorku.cmg&lt;/groupId&gt;
    &lt;artifactId&gt;cnsim-engine&lt;/artifactId&gt;
    &lt;version&gt;0.1.0&lt;/version&gt;
    &lt;packaging&gt;jar&lt;/packaging&gt;

    &lt;name&gt;cnsim-engine&lt;/name&gt;
    &lt;description&gt;cnsim-engine description&lt;/description&gt;
    &lt;url&gt;http://www.example.com&lt;/url&gt;

    &lt;licenses&gt;
        &lt;license&gt;
            &lt;name&gt;GNU Lesser General Public License, Version 2.1&lt;/name&gt;
            &lt;url&gt;https://www.gnu.org/licenses/old-licenses/lgpl-2.1.html&lt;/url&gt;
        &lt;/license&gt;
    &lt;/licenses&gt;

    &lt;developers&gt;
        &lt;developer&gt;
            &lt;name&gt;John Doe&lt;/name&gt;
            &lt;url&gt;https://github.com/johndoe&lt;/url&gt;
            &lt;email&gt;john@example.com&lt;/email&gt;  
            &lt;organization&gt;York University&lt;/organization&gt;
            &lt;organizationUrl&gt;https://lassonde.yorku.ca&lt;/organizationUrl&gt;
        &lt;/developer&gt;
    &lt;/developers&gt;

    &lt;scm&gt;
        &lt;connection&gt;scm:git:https://github.com/cmg-york/cnsim-engine.git&lt;/connection&gt;
        &lt;developerConnection&gt;scm:git:ssh://git@github.com/cmg-york/cnsim-engine.git&lt;/developerConnection&gt;
        &lt;url&gt;https://github.com/cmg-york/cnsim-engine&lt;/url&gt;
    &lt;/scm&gt;
    
    &lt;properties&gt;
        ...
    &lt;/properties&gt;
    
    &lt;dependencies&gt;
        ...
    &lt;/dependencies&gt;
    
    &lt;profiles&gt;
      &lt;profile&gt;
        &lt;id&gt;deployment&lt;/id&gt;
        &lt;build&gt;
          &lt;plugins&gt;
    
            &lt;!-- Attach sources.jar at package --&gt;
            &lt;plugin&gt;
              &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
              &lt;artifactId&gt;maven-source-plugin&lt;/artifactId&gt;
              &lt;version&gt;3.3.1&lt;/version&gt;
              &lt;executions&gt;
                &lt;execution&gt;
                  &lt;id&gt;attach-sources&lt;/id&gt;
                  &lt;phase&gt;package&lt;/phase&gt;
                  &lt;goals&gt;&lt;goal&gt;jar-no-fork&lt;/goal&gt;&lt;/goals&gt;
                &lt;/execution&gt;
              &lt;/executions&gt;
            &lt;/plugin&gt;
    
            &lt;!-- Attach javadoc.jar at package --&gt;
            &lt;plugin&gt;
              &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
              &lt;artifactId&gt;maven-javadoc-plugin&lt;/artifactId&gt;
              &lt;version&gt;3.11.1&lt;/version&gt;
              &lt;configuration&gt;
                &lt;doclint&gt;all,-missing&lt;/doclint&gt;
              &lt;/configuration&gt;
              &lt;executions&gt;
                &lt;execution&gt;
                  &lt;id&gt;attach-javadocs&lt;/id&gt;
                  &lt;phase&gt;package&lt;/phase&gt;
                  &lt;goals&gt;&lt;goal&gt;jar&lt;/goal&gt;&lt;/goals&gt;
                &lt;/execution&gt;
              &lt;/executions&gt;
            &lt;/plugin&gt;
    
            &lt;!-- Sign everything at verify --&gt;
            &lt;plugin&gt;
              &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
              &lt;artifactId&gt;maven-gpg-plugin&lt;/artifactId&gt;
              &lt;version&gt;3.2.7&lt;/version&gt;
              &lt;executions&gt;
                &lt;execution&gt;
                  &lt;id&gt;sign-artifacts&lt;/id&gt;
                  &lt;phase&gt;verify&lt;/phase&gt;
                  &lt;goals&gt;&lt;goal&gt;sign&lt;/goal&gt;&lt;/goals&gt;
                &lt;/execution&gt;
              &lt;/executions&gt;
              &lt;configuration&gt;
                &lt;!-- optional: explicitly choose key --&gt;
                &lt;!-- &lt;keyname&gt;${gpg.keyname}&lt;/keyname&gt; --&gt;
              &lt;/configuration&gt;
            &lt;/plugin&gt;
    
            &lt;!-- Publish at deploy --&gt;
            &lt;plugin&gt;
              &lt;groupId&gt;org.sonatype.central&lt;/groupId&gt;
              &lt;artifactId&gt;central-publishing-maven-plugin&lt;/artifactId&gt;
              &lt;version&gt;0.8.0&lt;/version&gt;
              &lt;extensions&gt;true&lt;/extensions&gt;
              &lt;configuration&gt;
                &lt;publishingServerId&gt;central&lt;/publishingServerId&gt;
                &lt;autoPublish&gt;true&lt;/autoPublish&gt;
                &lt;!-- 'uploaded' returns sooner; 'published' waits until it&#x2019;s visible --&gt;
                &lt;waitUntil&gt;uploaded&lt;/waitUntil&gt;
              &lt;/configuration&gt;
            &lt;/plugin&gt;
              
          &lt;/plugins&gt;
        &lt;/build&gt;
      &lt;/profile&gt;
    &lt;/profiles&gt;
&lt;/project&gt;
</code></pre>
<blockquote>

<p>Javadoc and sources generation can slow down the regular build process.
It is good to move release-only plugins behind a profile.</p>
</blockquote></section><section><a id="a9._Setup_settings.xml"></a>
<h3>9. Setup <code>settings.xml</code></h3>
<p>You can add Sonatype user token to Maven <code>settings.xml</code></p>
<p>Windows: <code>C:\Users\your_username\.m2\settings.xml</code>
Linux/macOS: <code>/home/your_username/.m2/settings.xml</code></p>
<p>If you don't want to use the default Maven <code>settings.xml</code>, you can use another XML file.</p>
<p>Either way, it should look like this:</p>

<pre class="prettyprint"><code class="language-xml">&lt;settings xmlns=&quot;http://maven.apache.org/SETTINGS/1.0.0&quot;
  xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
  xsi:schemaLocation=&quot;http://maven.apache.org/SETTINGS/1.0.0 https://maven.apache.org/xsd/settings-1.0.0.xsd&quot;&gt;
    
  &lt;servers&gt;
    &lt;server&gt;
      &lt;id&gt;central&lt;/id&gt;
      &lt;!-- replace this with generated username --&gt;
      &lt;username&gt;username&lt;/username&gt;
      &lt;!-- replace this with generated password --&gt;
      &lt;password&gt;password&lt;/password&gt;
    &lt;/server&gt;
  &lt;/servers&gt;
&lt;/settings&gt;

</code></pre></section><section><a id="a10._Locally_Deploy"></a>
<h3>10. Locally Deploy</h3>

<pre class="prettyprint"><code class="language-bash"># If using default Maven settings.xml
mvn -Pdeployment clean deploy

# If pointing to a custom settings.xml
mvn -Pdeployment clean deploy -s some_file.xml


# There will be a prompt in the console for entering the passphrase
</code></pre>
<p>This runs:</p>
<ul>

<li>package - builds main + sources + javadoc jars</li>
<li>verify - GPG signs all artifacts</li>
<li>deploy - Central Publishing plugin uploads and publishes</li>
</ul>
<p>Go to Sonatype deployments page.</p>
<p><code>Verified</code> status should be changed to <code>Publishing</code>.</p>
<p><img src="../images/publishing.png" alt="Publishing status" /></p>
<p>After a few minutes, if successful, it should be updated to <code>Published</code>.</p>
<p><img src="../images/published.png" alt="Published status" /></p>
<p>You can now add it as a dependency and search for your package here: <a href="https://central.sonatype.com/" class="externalLink">https://central.sonatype.com/</a></p>
<p><img src="../images/overview.png" alt="Overview page" /></p>
<blockquote>

<p>Unlike pulling from GitHub Package, users do not require a Personal Access Token (PAT) in order to install a
dependency up on Central Maven</p>
</blockquote></section><section><a id="a11._.5BOptional.5D_GitHub_Actions_.26_CI.2FCD"></a>
<h3>11. [Optional] GitHub Actions &amp; CI/CD</h3>
<p>In order for GitHub Actions to deploy to Maven Central, skip the pinentry program (the GUI passphrase prompt)
and use loopback (non-interactive) to accept the passphrase:</p>

<pre class="prettyprint"><code class="language-xml">&lt;plugin&gt;
    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
    &lt;artifactId&gt;maven-gpg-plugin&lt;/artifactId&gt;
    &lt;version&gt;3.2.7&lt;/version&gt;
    &lt;executions&gt;
        &lt;execution&gt;
            &lt;id&gt;sign-artifacts&lt;/id&gt;
            &lt;phase&gt;verify&lt;/phase&gt;
            &lt;goals&gt;&lt;goal&gt;sign&lt;/goal&gt;&lt;/goals&gt;
        &lt;/execution&gt;
    &lt;/executions&gt;
    &lt;configuration&gt;
        &lt;!-- optional: explicitly choose key --&gt;
        &lt;!-- &lt;keyname&gt;${gpg.keyname}&lt;/keyname&gt; --&gt;
        &lt;gpgArguments&gt; 
            &lt;arg&gt;--pinentry-mode&lt;/arg&gt;&lt;arg&gt;loopback&lt;/arg&gt; &lt;!-- ADD THIS --&gt;
        &lt;/gpgArguments&gt;
    &lt;/configuration&gt;
&lt;/plugin&gt;
</code></pre>
<p>In <code>github/workflows/publish-artifact.yml</code>:</p>

<pre class="prettyprint"><code class="language-yaml">name: &quot;Publish Artifact&quot;

on:
  workflow_dispatch: # manually triggered

permissions:
  contents: write

jobs:
  publish-artifact:
    runs-on: ubuntu-latest
    name: Publish artifact via The Central Portal
    steps:
      - name: Checkout repository
        uses: actions/checkout@v4
        with:
          fetch-depth: 0
          ref: ${{ github.ref_name }}

      - name: Set up JDK 17
        uses: actions/setup-java@v4
        with:
          java-version: '17'
          distribution: 'temurin'
          cache: maven
          server-id: central
          server-username: MAVEN_USERNAME # env variable for username in deploy
          server-password: MAVEN_CENTRAL_TOKEN # env variable for token in deploy
          gpg-private-key: ${{ secrets.MAVEN_GPG_PRIVATE_KEY }} # Value of the GPG private key to import
          gpg-passphrase: MAVEN_GPG_PASSPHRASE # env variable for GPG private key passphrase

      - name: Publish artifact
        run: mvn clean deploy -P deployment
        env:
          MAVEN_USERNAME: ${{ secrets.MAVEN_CENTRAL_USERNAME }}
          MAVEN_CENTRAL_TOKEN: ${{ secrets.MAVEN_CENTRAL_TOKEN }}
          MAVEN_GPG_PASSPHRASE: ${{ secrets.MAVEN_GPG_PASSPHRASE }}
</code></pre>
<p>Add the following secrets in GitHub repository (<code>Repository Settings</code> &gt; <code>Secrets</code> &gt; <code>Actions</code> &gt; <code>New repository secret</code>):</p>

<pre><code class="nohighlight nocode">MAVEN_CENTRAL_USERNAME
MAVEN_CENTRAL_TOKEN
MAVEN_GPG_PASSPHRASE
MAVEN_GPG_PRIVATE_KEY
</code></pre>
<blockquote>

<p>There's a way to publish artifacts on Central and make releases on GitHub by pushing tags</p>
</blockquote></section></section><section><a id="Extra_notes"></a>
<h2>Extra notes</h2><section><a id="SNAPSHOTs"></a>
<h3>SNAPSHOTs</h3>
<p>You can publish SNAPSHOTs to Central. Enable snapshots for your namespace by
<code>In Namespaces</code> &gt; <code>your namespace</code> &gt; <code>Enable SNAPSHOTs</code></p>
<p><img src="../images/enableSnapshots.png" alt="Enable Snapshots" /></p>
<p>Have <code>-SNAPSHOT</code> in <code>version</code> then deploy as usual</p>

<pre class="prettyprint"><code class="language-bash">mvn -Pdeployment clean deploy
</code></pre></section><section><a id="Manually_getting_artifacts_or_built_JAR"></a>
<h3>Manually getting artifacts or built JAR</h3>
<p>You can get JAR from Maven Central (release) or the Central Snapshots repo (SNAPSHOTs).</p>
<p><img src="../images/browseRepo.png" alt="Browse Repo" /></p>
<p>Example: <a href="https://repo1.maven.org/maven2/io/github/nina2dv/xml-validation-central-maven-test/1.0.0/" class="externalLink">https://repo1.maven.org/maven2/io/github/nina2dv/xml-validation-central-maven-test/1.0.0/</a></p>
<p><img src="../images/releaseRepo.png" alt="Release Repo" /></p></section></section><section><a id="References"></a>
<h2>References</h2>
<ul>

<li><a href="https://central.sonatype.org/register/central-portal/" class="externalLink">https://central.sonatype.org/register/central-portal/</a></li>
<li><a href="https://central.sonatype.org/publish/requirements/#correct-coordinates" class="externalLink">https://central.sonatype.org/publish/requirements/#correct-coordinates</a></li>
<li><a href="https://central.sonatype.org/publish/requirements/gpg/#listing-keys" class="externalLink">https://central.sonatype.org/publish/requirements/gpg/#listing-keys</a></li>
<li><a href="https://medium.com/@othmane.outama/step-by-step-publishing-java-libraries-to-maven-central-abf2ffeb04c0" class="externalLink">https://medium.com/@othmane.outama/step-by-step-publishing-java-libraries-to-maven-central-abf2ffeb04c0</a></li>
</ul></section></section>        </main>
      </div>
    </div>
    <hr/>
    <footer>
      <div class="container-fluid">
        <div class="row-fluid">
            <p>Â©      2025
<a href="https://cmg.info.yorku.ca/">Conceptual Modeling Group @ York University</a>
</p>
        </div>
      </div>
    </footer>
  </body>
</html>
